<!DOCTYPE html>
    <html lang="en"> 
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>jquery with promise</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">    
    </head>
    <body>       
        <div class="spinner-border text-danger  " role="status">
            <span class="visually-hidden">Loading...</span>
          </div>  <br>            
        <button class="btn btn-success a_athor">GET ATHORES</button>
        <script>
            document.querySelector('button.btn.btn-success.a_athor').addEventListener('click',function(){                
                document.querySelector('.spinner-border').remove();           
            //https://fakerestapi.azurewebsites.net/api/v1/Authors
            // llet create promise obj
            let po=new Promise(function(resolve,reject){
                //producinge code = take time
                $.ajax({
                url:'https://fakerestapi.azurewebsites.net/api/v1/Authors',
                type:'GET',
                success:function(result,status,xhr){
                console.log(result);
                resolve(result);
            },
            error:function(xhr,status,error){
                reject(error);
            }
            })                 
            });
            // consuming code
            po.then(function(data){
              console.log('1',data);
              var tr=` <table class="table">            
             <thead>
              <tr>
                <th scope="col">firstName</th>
                <th scope="col">id</th>
                <th scope="col">idBook</th>
                <th scope="col">lastName</th>
                <th scope="col">action</th> 
              </tr>
             </thead>
            <tbody>`;
              data.forEach(element => {
                console.log(element);
                tr += ` 
                    <tr>
                 <td>`+element.firstName+`</td>
                 <td>`+element.id+`</td>
                 <td>`+element.idBook+`</td>                 
                 <td>`+element.lastName+`</td>
                 <td>
                    <button class="btn btn-sm btn-success">view</button>
                    <button class="btn btn-sm btn-primary">Edit</button>
                    <button class="btn btn-sm btn-danger">Delete</button> 
                    </td>
               </tr>`;                 
              });
              tr += `</tbody>
                        </table>`;                
              console.log(tr);            
              document.body.innerHTML += tr;
            }).catch(function(error){
            }).finally();
        });
        </script>
    </body>          
</html> 