<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>how to make own fake api</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" integrity="sha512-vKMx8UnXk60zUwyUnUPM3HbQo8QfmNx7+ltw8Pm5zLusl1XIfwcxo8DbWCqMGKaWeNxWA8yrx5v3SaVpMvR3CA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js" integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js" integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js" integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    </head>
    <body>
         <div class="d-flex justify-content-center invisible a_loader">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
      <div class="d-flex justify-content-center">
      <button class="btn btn-success" data-a1="getdata">GET</button></div>
        <table class="table">
            <thead>
              <tr>
                <th scope="col">id</th>
                <th scope="col">idBook</th>
                <th scope="col">url</th>
                <th scope="col">action</th>
              </tr>
            </thead>
            <tbody>
                       
            </tbody>
          </table>
        <script>
                function fetch2(url,obj){//fetch2(url,obj={ method ="GET"}){
                  return new Promise(function(resolve,reject){
                  let xhr =new XMLHttpRequest();
                  xhr.open(obj.method,url);
                  xhr.send();
                  xhr.onreadystatechange=function(){
                    if((this.readyState == 4) && (this.status==200)){
                      resolve(JSON.parse(this.responseText));
                    }
                    if(this.status!=200){
                       reject('error');
                    }
                  }

                  })

                }
              
            var obj= 'https://fakerestapi.azurewebsites.net';
                
              //var loader= document.querySelector('.a_loader');
              document.querySelector('[data-a1="getdata"]').addEventListener('click',function(){
               //swal("good job")
               //toastr('successfully done');
              // loader.classList.remove('invisible');}
              fetch2(obj+'/api/v1/CoverPhotos/',{//fetch2(`${obj}/api/v1/CoverPhotos/`)
                method:"GET"
              }).then((data)=>{
                console.log(data);
              }).catch((error)=>{
                console.log(error);
              });
              })
             /* fetch(obj+'/api/v1/CoverPhotos',{
                method:"GET"
              })
              .then(response => response.json())
              .then(data =>{
                loader.classList.add('invisible');
                console.log('Success:',data);
                var tr=``;
                data.forEach(element => {
                    console.log(element);
                         tr +=`<tr>
                                    <td>`+element.id+`</td>
                                    <td>`+element.idBook+`</td>
                                    <td><a target="_blank" href="`+element.url+`">link</a></td>
                                    <td>
                                        <button class="btn btn-sm btn-success a_view">view</button>
                                        <button class="btn btn-sm btn-primary a_edit">edit</button>
                                        <button class="btn btn-sm btn-danger a_del">delete</button>
                                    </td> 
                                </tr>  `;
                });
                console.log(tr);
                document.querySelector('table > tbody').innerHTML=tr;
              })
              .catch().finally();
                })
                /**/
            /* 
              $.ajax({
                ...obj,
                url:obj.url+'',
              })*/
           /*   document.addEventListener('click',function(e){
               console.log(e.target.classList.contains('a_del'))
               if(e.target.classList.contains('a_del')){
                let id = e.target.closest('tr').querySelector('td:first-child').innerHTML;
                fetch(obj+'/api/v1/CoverPhotos/'+id,{
               // fetch(obj+'/api/v1/CoverPhotos/1',{
                    method:"DELETE"
                }).then(response => response.json()).then(data =>{
               swal("good job");
               }).catch().finally();
               swal("good job");

            }
              });*/

            
        </script>
    </body>
</html>