<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.3/axios.min.js" integrity="sha512-JWQFV6OCC2o2x8x46YrEeFEQtzoNV++r9im8O8stv91YwHNykzIS2TbvAlFdeH0GVlpnyd79W0ZGmffcRi++Bw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    </head>
    <body>
        <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <div class="spinner-grow" style="width: 3rem; height: 3rem;" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        
           <button class="btn btn-info a_getdata">GET DATA</button>  
           

        <script>
            document.querySelector('.a_getdata').addEventListener('click',function(){
                document.querySelector('.spinner-border').remove();
                document.querySelector('.spinner-grow').remove();

            //promise object create
            let x= new Promise(function(resolve,reject){
                axios.get('https://fakerestapi.azurewebsites.net/api/v1/Books')
                .then(function(response){
                    console.log('producing',response);
                    if(response.status==200){
                        resolve(response.data);
                    }else{
                        reject('error');
                    }
                });
            

            });
        
           //consuming code -- promiseobj.then().catch()
            x.then(function(data){
                //success
                console.log('consuming code',data);
                var tr='';
                data.forEach((currentValue,index,arr) => {
                    console.log(currentValue);
                    tr += ` <table class="table">
                                            <thead>
                                            <tr>
                                                <th scope="col">ID</th>
                                                <th scope="col">TITLE</th>
                                                <th scope="col">description</th>
                                                <th scope="col">excerpt</th>
                                                <th scope="col">pageCount</th>
                                                <th scope="col">publishDate</th>
                                                <th scope="col">action</th>
                                                

                                            </tr>
                                            </thead>
                                            <tbody><tr>
                                                    <td scope="row">`+currentValue.id+`</td>
                                                    <td>`+currentValue.title+`</td>
                                                    <td>`+currentValue.description+`</td>
                                                    <td>`+currentValue.excerpt+`</td>
                                                    <td>`+currentValue.pageCount+`</td>
                                                    <td>`+currentValue.publishDate+`</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-success">View</button>
                                                        <button class="btn btn-sm btn-primary">Edit</button>
                                                        <button class="btn btn-sm btn-danger">Delete</button>

                                                    </td>

                                                </tr>`
                });
                tr +=`  
                        </tbody>
                    </table>`;
                console.log(tr);
           document.body.innerHTML = document.body.innerHTML+ tr;
            
            }).catch(function(data){
                //error
            });
        });

          


        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </body>
</html>